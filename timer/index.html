<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>

  <style>
    body {
      background-color: aliceblue;
    }

    .section {
      background-color: aliceblue;
      padding: 10px;
      width: fit-content;
    }

    #display {
      margin-bottom: 5px;
      font-size: 50px; /* Augmentation de la taille de l'affichage */
      font-family: monospace;
      color: darkturquoise;
    }

    .section input {
      font-size: 14px;
      color: #2D2D32;
      text-align: center;
      border: 1px solid gray;
      width: 60px;
      padding: 5px;
      margin-right: 4px;
      display: inline-block;
    }

    .buttons {
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
    }

    .buttons button {
      margin-right: 4px;
      padding: 10px 15px;
      background-color: #d8d8d8;
      border: none;
      color: white;
      font-size: 15px;
      cursor: pointer;
      outline: none;
      transition: 0.1s;
      margin-bottom: 5px;
    }

    .buttons button:active {
      box-shadow: 0 3px 3px -2px rgba(0,0,0,.2), 0 3px 4px 0 rgba(0,0,0,.14), 0 1px 8px 0 rgba(0,0,0,.12);
    }

    .buttons button:nth-child(3) {
      background-color: #8bc34a;
    }

    .buttons button:nth-child(4) {
      background-color: rgb(201, 89, 69);
    }

  </style>
</head>
<body>
  <section class="section">
    <div id="display">00:00</div>
  
    <div class="buttons">
      <input type="text" id="input" name="input" placeholder="minutes">
      <input type="text" id="input2" name="input2" placeholder="seconds">
      <button onclick="start()">▶</button>
      <button onclick="cancel()">∎</button>
    </div>

    <!-- Boutons pour ajouter des minutes directement -->
    <div class="buttons">
      <button onclick="addMinutes(1)">+1 min</button>
      <button onclick="addMinutes(2)">+2 min</button>
      <button onclick="addMinutes(3)">+3 min</button>
      <button onclick="addMinutes(6)">+6 min</button>
      <button onclick="addMinutes(9)">+9 min</button>
      <button onclick="addMinutes(10)">+10 min</button>
    </div>
    
  </section>
</body>

<script>
  var timer;
  var totalSeconds = 0; // Variable pour suivre le temps total en secondes

  function beep() {
    var snd = new Audio("bell.mp3");  
    snd.play();
  }

  function start() {
    var input = document.getElementById("input").value;
    var input2 = document.getElementById("input2").value;

    var minute = parseInt(input);
    var seconds1 = parseInt(input2);

    if (isNaN(seconds1)) {
      seconds1 = 0;
    }
    if (isNaN(minute)) {
      minute = 0;
    }

    totalSeconds = minute * 60 + seconds1;

    if (totalSeconds === 0) {
      return;
    }

    updateDisplay(); // Mise à jour initiale de l'affichage
    startTimer();
  }

  function startTimer() {
    timer = setInterval(function() {
      totalSeconds--;

      if (totalSeconds < 0) {
        clearInterval(timer);
        beep();
        return;
      }

      updateDisplay(); // Mise à jour à chaque seconde
    }, 1000);
  }

  function updateDisplay() {
    var minutes = Math.floor(totalSeconds / 60);
    var seconds = totalSeconds % 60;
    var textSec = seconds < 10 ? '0' + seconds : seconds;

    document.getElementById("display").innerHTML = minutes + ':' + textSec;
  }

  function cancel() {
    clearInterval(timer);
    document.getElementById("display").innerHTML = '00:00';
    totalSeconds = 0;
  }

  // Fonction pour ajouter des minutes
  function addMinutes(mins) {
    totalSeconds += mins * 60;
    updateDisplay(); // Met à jour l'affichage après ajout des minutes
  }
</script>

</html>
